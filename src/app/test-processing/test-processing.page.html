<ion-header>
  <ion-toolbar>
    <ion-title>Test Paper Processing</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding">
  <ion-card>
    <ion-card-header>
      <ion-card-title>Upload or Scan Test Paper</ion-card-title>
    </ion-card-header>
    <ion-card-content>
      <input type="file" (change)="uploadImage($event)" accept="image/*">
      <ion-button expand="full" color="primary" (click)="openCamera()">📸 Scan with Camera</ion-button>
    </ion-card-content>
  </ion-card>

  <ion-card *ngIf="previewImage">
    <ion-img [src]="previewImage"></ion-img>
    <ion-button expand="full" color="success" (click)="processImage()">📊 Process Image</ion-button>
  </ion-card>

  <ion-card *ngIf="extractedText">
    <ion-card-header>
      <ion-card-title>Extracted Data</ion-card-title>
    </ion-card-header>
    <ion-card-content>
      <p><strong>Extracted Text:</strong> {{ extractedText }}</p>
      <p><strong>Student Name:</strong> {{ studentName }}</p>
      <p><strong>Student Score:</strong> {{ studentScore }}</p>

      <!-- ✅ New Button to Send Extracted Name to Backend -->
      <ion-button expand="full" color="tertiary" (click)="processTestPaper()">🔍 Match Name</ion-button>
    </ion-card-content>
  </ion-card>
</ion-content>
